<!DOCTYPE html>
<html lang="en">
<head>
<title>Heatmap</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!-- ocpu library -->
<script src="jquery-1.10.2.min.js"> </script>
<script src="opencpu-0.4.js"> </script>

<!-- optional stuff for the resizable widget -->
<link href="jqueryui/css/ui-lightness/jquery-ui-1.10.3.custom.css" rel="stylesheet" media="screen">
<script src="jqueryui/jquery-ui-1.10.3.custom.js"> </script>

<script>

json_file <-  '[{"age (y)":24,"height (cm)":182,"wieght (kg)":74.8},
    {"age (y)":30,"height (cm)":170,"wieght (kg)":70.1},
    {"age (y)":41,"height (cm)":169,"wieght (kg)":60},
    {"age (y)":22,"height (cm)":183,"wieght (kg)":75},
    {"age (y)":31,"height (cm)":178,"wieght (kg)":83.9},
    {"age (y)":35,"height (cm)":172,"wieght (kg)":76.2},
    {"age (y)":22,"height (cm)":164,"wieght (kg)":68}]'


json_file <- fromJSON(json_file)

json_file <- lapply(json_file, function(x) {
    x[sapply(x, is.null)] <- NA
    unlist(x)
})

data <- do.call("rbind", json_file)

//on page ready:
$(function() {
  var req = $("#plotdiv").rplot("rollcorr").fail(function(data){
    alert(req.responseText);
  });
  
  //optional, requires jquery-ui.
  $("#plotdiv").resizable()    
});

$(function() {
  var req = $("#hclustplotdiv").rplot("heirarichalclustering").fail(function(){
    alert(req.responseText);
  });
  
  //optional, requires jquery-ui.
  $("#hclustplotdiv").resizable()    
});

$(function() {
  var req = $("#decisiontreediv").rplot("decisiontree").fail(function(){
    alert(req.responseText);
  });
  
  //optional, requires jquery-ui.
  $("#decisiontreediv").resizable()    
});


</script>

<style>
#plotdiv {
  margin-left: 10px;
  margin-top: 10px;
  width: 900px;
  height: 600px;
  border: solid gray 1px;
}

#hclustplotdiv {
  margin-left: 10px;
  margin-top: 10px;
  width: 900px;
  height: 600px;
  border: solid gray 1px;
}

#decisiontreediv {
  margin-left: 10px;
  margin-top: 10px;
  width: 900px;
  height: 600px;
  border: solid gray 1px;
}
</style>
</head>

<body>
  
  <h1>Helikar Labs</h1>
  
  <div id="plotdiv"></div>
  <div id="hclustplotdiv"></div>
  <div id="decisiontreediv"></div>

</body>
</html>
